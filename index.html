<html lang="en">
<h1>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</h1>

<body>
  <div id = "header"></div>
  <a href="/index.html"><img src="/bilder/logga (1).png" width= "150" alt="Spexloggan"></a>
  <h1><a href="/index.html"> Krischanstaspääxets<br>Sajber-Bajbel</a></h1>
  <a href="/spex/hc_andersen.html" class="button">H.C. Andersen 2024 (HCA)</a>
  <br>
  <a href="/spex/kristina.html" class="button">Kristina 2023/24 (KRI)</a>
  <br>
  <a href="/spex/kraftor.html" class="button">Kräftor Kräva Dessa Drycker 2023 (KRÄ)</a>
  <br>
  <a href="/spex/hilma.html" class="button">Hilma af Klint 2022/23 (HIL)</a>
  <br>
  <a href="/spex/loshultskuppen.html" class="button">Loshultskuppen 2022 (LOS)</a>
  <br>
  <a href="/spex/erik.html" class="button">Erik XIV 2021/22 (E14)</a>
  <br>
  <a href="/spex/lafayette.html" class="button">Lafayette 2019/20 (LAF)</a>
  <br>
  <a href="/spex/eva_ekeblad.html" class="button">Eva Ekeblad 2019 (EVA)</a>
  <br>
  <a href="/spex/synden_i_molle.html" class="button">Synden i Mölle 2018 (SIM)</a>
  <br>
  <a href="/spex/sketchofori.html" class="button">Sketchofori 2018 (SKO) - ej klar</a>
  <br>
  <a href="/spex/katarina.html" class="button">Katarina den stora 2017 (KAT) - ej klar</a>
</body>

<script>
  // Load header.html into the div with id="header"
  fetch('header.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('header').innerHTML = data;
      console.log("loaded header");

      document.getElementById('search-form').addEventListener('submit', function(event) {
          event.preventDefault(); // Tar bort reload
          console.log("Form submitted!");

          const searchTerm = document.getElementById('search-input').value.trim().toLowerCase();
          console.log("Search term:", searchTerm);

          if (!searchTerm) {
              alert("Please enter a search term.");
              return;
          }

          // Attempt to load songIndex.json
          fetch('/songIndex.json')
              .then(response => {
                  if (!response.ok) {
                      throw new Error("Network response was not ok " + response.statusText);
                  }
                  return response.json();
              })
              .then(data => {
                  console.log("Fetched song index:", data);

                  // Search for the song title in the JSON data
                  const match = data.find(song => song.title.toLowerCase().includes(searchTerm));
                  console.log("Search result:", match);

                  if (match) {
                      // Redirect to the page with the search term in the URL
                      window.location.href = `${match.page}?search=${encodeURIComponent(searchTerm)}`;
                  } else {
                      alert("No matching song found.");
                  }
              })
              .catch(error => {
                  console.error('Error fetching song index:', error);
                  alert("Could not load the song index file.");
              });
      });
    })
    .catch(error => console.error('Error loading header.html:', error));
    
    </script>
</body>

<body>
  <footer>
    <a href= "https://github.com/Bajbeln/Bajbeln.github.io"> <b>Källkod</b></a>
  </footer>
</body>
</html>