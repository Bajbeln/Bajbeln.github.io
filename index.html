<html lang="en">
<h1>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</h1>

<body>
  <div id = "header"></div>
  
  <a href="/index.html"><img src="/bilder/logga (1).png" width= "150" alt="Spexloggan"></a>
  <h1><a href="/index.html"> Krischanstaspääxets<br>Sajber-Bajbel</a></h1>
  <br>
  <a href="/spex/favourites.html" class="button"><i>Favoriter</i> - ej klar</a>
  <br>
  <a href="/spex/hc_andersen.html" class="button">H.C. Andersen 2024 (HCA)</a>
  <br>
  <a href="/spex/kristina.html" class="button">Kristina 2023/24 (KRI)</a>
  <br>
  <a href="/spex/kraftor.html" class="button">Kräftor Kräva Dessa Drycker! 2023 (KRÄ)</a>
  <br>
  <a href="/spex/hilma.html" class="button">Hilma af Klint 2022/23 (HIL)</a>
  <br>
  <a href="/spex/loshultskuppen.html" class="button">Loshultskuppen 2022 (LOS)</a>
  <br>
  <a href="/spex/sketchostrof.html" class="button">Sketchostrof 2022 (ROF)</a>
  <br>
  <a href="/spex/erik.html" class="button">Erik XIV 2021 (E14)</a>
  <br>
  <a href="/spex/lafayette.html" class="button">Lafayette 2019/20 (LAF)</a>
  <br>
  <a href="/spex/eva_ekeblad.html" class="button">Eva Ekeblad 2019 (EVA)</a>
  <br>
  <a href="/spex/synden_i_molle.html" class="button">Synden i Mölle 2018 (SIM)</a>
  <br>
  <a href="/spex/sketchofori.html" class="button">Sketchofori 2018 (SKO)</a>
  <br>
  <a href="/spex/katarina.html" class="button">Katarina den stora 2017 (KAT)</a>
  <br>
  <a href="/spex/hindenburg.html" class="button">Hindenburg 2017 (HIN)</a>
  <br>
  <a href="/spex/kleopatra.html" class="button">Kleopatra 2016 (KLE)</a>
  <br>
  <a href="/spex/lewinsky.html" class="button">Lewinsky 2016 (LEW)</a>
  <br>
  <a href="/spex/taget_over_balt.html" class="button">Tåget över bält 2015 (TÖB)</a>
  <br>
  <a href="/spex/karthago.html" class="button">Karthago 2014 (PUN)</a>
  <br>
  <a href="/spex/den_lagsta_punkten.html" class="button">Den lägsta punkten 2014 (HÅL)</a>
  <br>
  <a href="/spex/sketchetera.html" class="button">Sketchetera 2014 (ETC)</a>
  <br>
  <a href="/spex/rosetta.html" class="button">Rosettastenen 2013 (O)</a>
  <br>
  <a href="/spex/franz_ferdinand.html" class="button">Franz Ferdinand 2012/13 (FRA) - ej klar</a>
  <br>
  <a href="/spex/jerusalem.html" class="button">Jerusalem 2012 (JER) - ej klar</a>
  <br>
  <a href="/spex/per_albin.html" class="button">Per Albin Hansson 2011 (PAH) - ej klar</a>
  <br>
  <a href="/spex/caesar.html" class="button">Caesar 2010 (CAE) - ej klar</a>
  <br>
  <a href="/spex/sketchistens.html" class="button">Sketchistens 2010 (FEL) - ej klar</a>
  <br>
  <a href="/spex/nobel.html" class="button">Nobel 2007/08 (NOB) - ej klar</a>
  <br>
  <a href="/spex/os_feber.html" class="button">OS-feber i Kristianstad 2007 (OSF) - ej klar</a>
  <br>
  <a href="/spex/maria_eleonora.html" class="button">Maria Eleonora 2006 (MAR) - ej klar</a>
  <br>
  <a href="/spex/sketchofreni.html" class="button">Sketchofreni 2006 (SEV) - ej klar</a>
  <br>
  <a href="/spex/darwin.html" class="button">Darwin 2005 (DAR) - ej klar</a>
  <br>
  <a href="/spex/finland.html" class="button">Finlands bryggeri 2004 (FIN) - ej klar</a>
  <br>
  <a href="/spex/kubakrisen.html" class="button">Kubakrisen 2003 (KUK) - ej klar</a>
  <br>
  <a href="/spex/carl_xi.html" class="button">Carl XI 2003 (CXI) - ej klar</a>
  <br>
  <a href="/spex/sketchup.html" class="button">Sketchup 2003 (SKE) - ej klar</a>
</body>

<script>
  // Load header.html into the div with id="header"
  fetch('header.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('header').innerHTML = data;
      console.log("loaded header");

      document.getElementById('search-form').addEventListener('submit', function(event) {
          event.preventDefault(); // Tar bort reload
          console.log("Form submitted!");

          const searchTerm = document.getElementById('search-input').value.trim().toLowerCase();
          console.log("Search term:", searchTerm);

          if (!searchTerm) {
              alert("Please enter a search term.");
              return;
          }

          // Attempt to load songIndex.json
          fetch('/songIndex.json')
              .then(response => {
                  if (!response.ok) {
                      throw new Error("Network response was not ok " + response.statusText);
                  }
                  return response.json();
              })
              .then(data => {
                  console.log("Fetched song index:", data);

                  // Search for the song title in the JSON data
                  const match = data.find(song => song.title.toLowerCase().includes(searchTerm));
                  console.log("Search result:", match);

                  if (match) {
                      // Redirect to the page with the search term in the URL
                      window.location.href = `${match.page}?search=${encodeURIComponent(searchTerm)}`;
                  } else {
                      alert("No matching song found.");
                  }
              })
              .catch(error => {
                  console.error('Error fetching song index:', error);
                  alert("Could not load the song index file.");
              });
      });
    })
    .catch(error => console.error('Error loading header.html:', error));
    
    </script>
</body>

<body>
  <footer>
    Krischanstaspääxet 2024<br>
    <a href= "https://github.com/Bajbeln/Bajbeln.github.io"> <b>Källkod</b></a>
  </footer>
</body>
</html>